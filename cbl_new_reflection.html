<html><head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>InnovatorsMaker | New Reflection</title>

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="font-awesome/css/font-awesome.css" rel="stylesheet">

    <link href="css/animate.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">

</head>

<body class="gray-bg  pace-done"><div class="pace  pace-inactive"><div class="pace-progress" data-progress-text="100%" data-progress="99" style="transform: translate3d(100%, 0px, 0px);">
  <div class="pace-progress-inner"></div>
</div>
<div class="pace-activity"></div></div>

<link href="css/bootstrap.min.css" rel="stylesheet">
<link href="font-awesome/css/font-awesome.css" rel="stylesheet">
<link href="css/plugins/iCheck/custom.css" rel="stylesheet">
<link href="css/plugins/summernote/summernote.css" rel="stylesheet">
<link href="css/plugins/summernote/summernote-bs3.css" rel="stylesheet">
<link href="css/animate.css" rel="stylesheet">
<link href="css/style.css" rel="stylesheet">
<style type="text/css">
    .new-reflection-textarea {
        height: 100%;
        padding: 10px;
        width: 100%;
        border: none;
    }

    .reflection-statement {
        font-size: 18px;
    }

    .new-reflection-screen {
        padding: 0 20px;
    }

    .input-email {
        padding: 15px;
        width: 400px;
        border-radius: 10px;        
    }

    .note-editor .note-codable {
        display: block;
        background: white;
        color: #1ab394;
    }
</style>




<div class="pace  pace-inactive"><div class="pace-progress" data-progress-text="100%" data-progress="99" style="transform: translate3d(100%, 0px, 0px);">
    <div class="pace-progress-inner"></div>
</div>
<div class="pace-activity"></div>
</div>
    <div id="wrapper">
        <div id="" class="gray-bg" style="min-height: 1167px;">
        <div class="row border-bottom">
        <nav class="navbar navbar-static-top white-bg" role="navigation" style="margin-bottom: 0">
        <div class="navbar-header">
        </div>
            <ul class="nav navbar-top-links navbar-right">
                <li>
                    <span class="m-r-sm text-muted welcome-message">Welcome to INSPINIA+ Admin Theme.</span>
                </li>
                <li class="dropdown">
                    <a class="dropdown-toggle count-info" data-toggle="dropdown" href="#">
                        <i class="fa fa-envelope"></i>  <span class="label label-warning">16</span>
                    </a>
                    <ul class="dropdown-menu dropdown-messages">
                        <li>
                            <div class="dropdown-messages-box">
                                <a href="profile.html" class="pull-left">
                                    <img alt="image" class="img-circle" src="img/a7.jpg">
                                </a>
                                <div class="media-body">
                                    <small class="pull-right">46h ago</small>
                                    <strong>Mike Loreipsum</strong> started following <strong>Monica Smith</strong>. <br>
                                    <small class="text-muted">3 days ago at 7:58 pm - 10.06.2014</small>
                                </div>
                            </div>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <div class="dropdown-messages-box">
                                <a href="profile.html" class="pull-left">
                                    <img alt="image" class="img-circle" src="img/a4.jpg">
                                </a>
                                <div class="media-body ">
                                    <small class="pull-right text-navy">5h ago</small>
                                    <strong>Chris Johnatan Overtunk</strong> started following <strong>Monica Smith</strong>. <br>
                                    <small class="text-muted">Yesterday 1:21 pm - 11.06.2014</small>
                                </div>
                            </div>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <div class="dropdown-messages-box">
                                <a href="profile.html" class="pull-left">
                                    <img alt="image" class="img-circle" src="img/profile.jpg">
                                </a>
                                <div class="media-body ">
                                    <small class="pull-right">23h ago</small>
                                    <strong>Monica Smith</strong> love <strong>Kim Smith</strong>. <br>
                                    <small class="text-muted">2 days ago at 2:30 am - 11.06.2014</small>
                                </div>
                            </div>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <div class="text-center link-block">
                                <a href="mailbox.html">
                                    <i class="fa fa-envelope"></i> <strong>Read All Messages</strong>
                                </a>
                            </div>
                        </li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a class="dropdown-toggle count-info" data-toggle="dropdown" href="#">
                        <i class="fa fa-bell"></i>  <span class="label label-primary">8</span>
                    </a>
                    <ul class="dropdown-menu dropdown-alerts">
                        <li>
                            <a href="mailbox.html">
                                <div>
                                    <i class="fa fa-envelope fa-fw"></i> You have 16 messages
                                    <span class="pull-right text-muted small">4 minutes ago</span>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="profile.html">
                                <div>
                                    <i class="fa fa-twitter fa-fw"></i> 3 New Followers
                                    <span class="pull-right text-muted small">12 minutes ago</span>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="grid_options.html">
                                <div>
                                    <i class="fa fa-upload fa-fw"></i> Server Rebooted
                                    <span class="pull-right text-muted small">4 minutes ago</span>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <div class="text-center link-block">
                                <a href="notifications.html">
                                    <strong>See All Alerts</strong>
                                    <i class="fa fa-angle-right"></i>
                                </a>
                            </div>
                        </li>
                    </ul>
                </li>


                <li>
                    <a href="login.html">
                        <i class="fa fa-sign-out"></i> Log out
                    </a>
                </li>
            </ul>

        </nav>
        </div>

        <div class="wrapper wrapper-content">
            <div class="row">            
                <div class="new-reflection-panel col-lg-offset-3 col-lg-6 animated fadeInRight">
                    <div class="new-reflection-header mail-box-header" style="padding: 10px;">                
                        <h3>
                            Reflect
                        </h3>
                    </div>
                    <div class="mail-box">


                    <div class="mail-body">
                        <div class="form-horizontal">
                            <div class="form-group">
                                <div class="col-sm-12">
                                <input type="text" class="input-email form-control" value="" placeholder="write your email"></div>
                            </div>                        
                        </div>
                    </div>

                    <div class="reflection-textarea mail-text h-200 hide">
                        <div class="note-editor">
                            <div class="note-toolbar btn-toolbar">
                                <p class="reflection-statement-text"></p>
                            </div>
                            <textarea rows="10" class="note-codable"></textarea>
                        </div>
                    </div>
                    <div class="send-reflection-buttons mail-body text-right tooltip-demo hide">
                        <a href="#" class="btn-send-reflection btn btn-sm btn-primary"> <i class="fa fa-reply"></i> Send Reflection</a>
                        <a href="#" class="btn btn-white btn-sm"><i class="fa fa-times"></i> Discard</a>
                    </div>
                </div>
            </div>
        </div>
        

        </div>
        </div>

    <!-- Mainly scripts -->
    <script src="js/jquery-2.1.1.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/plugins/metisMenu/jquery.metisMenu.js"></script>
    <script src="js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

    <!-- Custom and plugin javascript -->
    <script src="js/inspinia.js"></script>
    <script src="js/plugins/pace/pace.min.js"></script>

    <!-- iCheck -->
    <script src="js/plugins/iCheck/icheck.min.js"></script>

    <script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.2.18.min.js"></script>
    <script type="text/javascript">
        Parse.initialize("YALt9tjcUpW61Hz5aIPYbehm9uCgh5NXXRVM18T6", "5wwhJ6hfqu8cG4s6jMKMQWrmImiQKDTE9trvgL6x");
    </script>

    <script type="text/javascript">
        var currentReflection;

        $(function() {
            Parse.User.logOut();
            $('.input-email').focus();
            $('.btn-send-reflection').click(function() {
                var text = $(this).parents('.new-reflection-panel').find('textarea').val().trim();
                currentReflection.set('text', text);
                currentReflection.set('isDone', true);
                currentReflection.save().then(function() {
                    $('.reflection-textarea').addClass('hide');
                    $('.reflection-textarea').find('textarea').val('');
                    
                    var Reflection = Parse.Object.extend('Reflection');
                    var reflectionQuery = new Parse.Query(Reflection);
                    reflectionQuery.include('reflectionStatement');
                    reflectionQuery.equalTo('author', user);
                    reflectionQuery.equalTo('isDone', false);
                    reflectionQuery.find().then(function(reflections) {
                        if (reflections.length > 0) {
                            var reflection = reflections[0];
                            $('.reflection-statement-text').text(reflection.get('reflectionStatement').get('text'));
                            $('.reflection-textarea').removeClass('hide');
                            $('.reflection-textarea').find('textarea').focus();
                            currentReflection = reflection;
                        }
                    })                    
                })
            })
            $('.input-email').change(function() {
                var email = $(this).val().trim();
                if (email != '') {
                    var query = new Parse.Query(Parse.User);
                    query.equalTo("email", $(this).val());  // find all the women
                    query.find().then(function(users) {
                        if (users.length > 0) {
                            var user = users[0];
                            $('.user-name').text(user.get('firstName'));
                            $('.new-reflection-panel').removeClass('hide'); 
                            $('.send-reflection-buttons').removeClass('hide');
                            $('.new-reflection-textarea').focus();

                            var Reflection = Parse.Object.extend('Reflection');
                            var reflectionQuery = new Parse.Query(Reflection);
                            reflectionQuery.include('reflectionStatement');
                            reflectionQuery.equalTo('author', user);
                            reflectionQuery.equalTo('isDone', false);
                            reflectionQuery.find().then(function(reflections) {
                                if (reflections.length > 0) {
                                    var reflection = reflections[0];
                                    $('.reflection-statement-text').text(reflection.get('reflectionStatement').get('text'));
                                    $('.reflection-textarea').removeClass('hide');
                                    $('.reflection-textarea').find('textarea').focus();
                                    currentReflection = reflection;
                                }
                            })
                        }else {
                            $('.new-reflection-panel').addClass('hide');
                        }
                    });                    
                }else {
                    $('.new-reflection-panel').addClass('hide');
                }
            })

            $('#btn-send-reflection').click(function() {
                var query = new Parse.Query(Parse.User);
                var email = $('.input-email').val().trim();

                query.equalTo("email", email);  // find all the women
                query.find().then(function(users) {
                    if (users.length > 0) {
                        var user = users[0];
                        $('.user-name').text(user.get('firstName'));
                        $('.new-reflection-panel').removeClass('hide'); 
                        $('.new-reflection-textarea').focus();

                        var Reflection = Parse.Object.extend('Reflection');
                        var reflectionQuery = new Parse.Query(Reflection);
                        reflectionQuery.equalTo('author', user);
                        reflectionQuery.equalTo('isDone', false);
                        reflectionQuery.find().then(function(reflections) {
                            if (reflections.length > 0) {
                                var reflection = reflections[0];
                                $('.reflection-statement-text').text(reflection.get('text'));
                            }
                        })
                    }else {
                        $('.new-reflection-panel').addClass('hide');
                    }
                });                    
            })
        })
    </script>
</body>

</html>
